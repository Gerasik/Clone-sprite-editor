!function(t){var e={};function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(r,o,function(e){return t[e]}.bind(null,o));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e){!function(t){function e(r){if(i[r])return i[r].exports;var o=i[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var r,o;r=i(1),o=function(t){var e,i,o,s;return e=new r(t.width,t.height),0===t.index?e.writeHeader():e.firstFrame=!1,e.setTransparent(t.transparent),e.setRepeat(t.repeat),e.setDelay(t.delay),e.setQuality(t.quality),e.setDither(t.dither),e.setGlobalPalette(t.globalPalette),e.addFrame(t.data),t.last&&e.finish(),!0===t.globalPalette&&(t.globalPalette=e.getGlobalPalette()),o=e.stream(),t.data=o.pages,t.cursor=o.cursor,t.pageSize=o.constructor.pageSize,t.canTransfer?(s=function(){var e,r,o,s;for(s=[],e=0,r=(o=t.data).length;e<r;e++)i=o[e],s.push(i.buffer);return s}(),self.postMessage(t,s)):self.postMessage(t)},self.onmessage=function(t){return o(t.data)}},function(t,e,i){function r(){this.page=-1,this.pages=[],this.newPage()}function o(t,e){this.width=~~t,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new r}var s=i(2),n=i(3);r.pageSize=4096,r.charMap={};for(var a=0;a<256;a++)r.charMap[a]=String.fromCharCode(a);r.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(r.pageSize),this.cursor=0},r.prototype.getData=function(){for(var t="",e=0;e<this.pages.length;e++)for(var i=0;i<r.pageSize;i++)t+=r.charMap[this.pages[e][i]];return t},r.prototype.writeByte=function(t){this.cursor>=r.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},r.prototype.writeUTFBytes=function(t){for(var e=t.length,i=0;i<e;i++)this.writeByte(t.charCodeAt(i))},r.prototype.writeBytes=function(t,e,i){for(var r=i||t.length,o=e||0;o<r;o++)this.writeByte(t[o])},o.prototype.setDelay=function(t){this.delay=Math.round(t/10)},o.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},o.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},o.prototype.setRepeat=function(t){this.repeat=t},o.prototype.setTransparent=function(t){this.transparent=t},o.prototype.addFrame=function(t){this.image=t,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),!0===this.globalPalette&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.globalPalette||this.writePalette(),this.writePixels(),this.firstFrame=!1},o.prototype.finish=function(){this.out.writeByte(59)},o.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},o.prototype.setDither=function(t){!0===t&&(t="FloydSteinberg"),this.dither=t},o.prototype.setGlobalPalette=function(t){this.globalPalette=t},o.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},o.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},o.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new s(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),null!==this.dither.match(/-serpentine/)):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},o.prototype.indexPixels=function(){var t=this.pixels.length/3;this.indexedPixels=new Uint8Array(t);for(var e=0,i=0;i<t;i++){var r=this.findClosestRGB(255&this.pixels[e++],255&this.pixels[e++],255&this.pixels[e++]);this.usedEntry[r]=!0,this.indexedPixels[i]=r}},o.prototype.ditherPixels=function(t,e){var i={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[.25,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!t||!i[t])throw"Unknown dithering kernel: "+t;var r=i[t],o=0,s=this.height,n=this.width,a=this.pixels,h=e?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var l=0;l<s;l++){e&&(h*=-1);for(var u=1==h?0:n-1,p=1==h?n:0;u!==p;u+=h){var f=3*(o=l*n+u),c=a[f],y=a[f+1],d=a[f+2];f=this.findClosestRGB(c,y,d),this.usedEntry[f]=!0,this.indexedPixels[o]=f,f*=3;for(var w=c-this.colorTab[f],g=y-this.colorTab[f+1],b=d-this.colorTab[f+2],x=1==h?0:r.length-1,v=1==h?r.length:0;x!==v;x+=h){var P=r[x][1],m=r[x][2];if(P+u>=0&&P+u<n&&m+l>=0&&m+l<s){var B=r[x][0];f=o+P+m*n,a[f*=3]=Math.max(0,Math.min(255,a[f]+w*B)),a[f+1]=Math.max(0,Math.min(255,a[f+1]+g*B)),a[f+2]=Math.max(0,Math.min(255,a[f+2]+b*B))}}}}},o.prototype.findClosest=function(t,e){return this.findClosestRGB((16711680&t)>>16,(65280&t)>>8,255&t,e)},o.prototype.findClosestRGB=function(t,e,i,r){if(null===this.colorTab)return-1;if(this.neuQuant&&!r)return this.neuQuant.lookupRGB(t,e,i);for(var o=0,s=16777216,n=this.colorTab.length,a=0,h=0;a<n;h++){var l=t-(255&this.colorTab[a++]),u=e-(255&this.colorTab[a++]),p=i-(255&this.colorTab[a++]),f=l*l+u*u+p*p;(!r||this.usedEntry[h])&&f<s&&(s=f,o=h)}return o},o.prototype.getImagePixels=function(){var t=this.width,e=this.height;this.pixels=new Uint8Array(t*e*3);for(var i=this.image,r=0,o=0,s=0;s<e;s++)for(var n=0;n<t;n++)this.pixels[o++]=i[r++],this.pixels[o++]=i[r++],this.pixels[o++]=i[r++],r++},o.prototype.writeGraphicCtrlExt=function(){var t,e;this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4),null===this.transparent?(t=0,e=0):(t=1,e=2),this.dispose>=0&&(e=7&dispose),e<<=2,this.out.writeByte(0|e|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},o.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},o.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},o.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},o.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,e=0;e<t;e++)this.out.writeByte(0)},o.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},o.prototype.writePixels=function(){new n(this.width,this.height,this.indexedPixels,this.colorDepth).encode(this.out)},o.prototype.stream=function(){return this.out},t.exports=o},function(t,e){var i=100,r=256,o=r-1,s=4,n=16,a=1<<n,h=10,l=10,u=a>>l,p=a<<h-l,f=6,c=(r>>3)*(1<<f),y=30,d=1024,w=256,g=1<<18,b=499,x=491,v=487,P=503,m=3*P;t.exports=function(t,e){function B(t,e,i,r,o){M[e][0]-=t*(M[e][0]-i)/d,M[e][1]-=t*(M[e][1]-r)/d,M[e][2]-=t*(M[e][2]-o)/d}function S(t,e,i,o,s){for(var n,a,h=Math.abs(e-t),l=Math.min(e+t,r),u=e+1,p=e-1,f=1;u<l||p>h;)a=I[f++],u<l&&((n=M[u++])[0]-=a*(n[0]-i)/g,n[1]-=a*(n[1]-o)/g,n[2]-=a*(n[2]-s)/g),p>h&&((n=M[p--])[0]-=a*(n[0]-i)/g,n[1]-=a*(n[1]-o)/g,n[2]-=a*(n[2]-s)/g)}function T(t,e,i){t|=0,e|=0,i|=0;var o,a,f,c,y,d=~(1<<31),w=d,g=-1,b=g;for(o=0;o<r;o++)a=M[o],(f=Math.abs((0|a[0])-t)+Math.abs((0|a[1])-e)+Math.abs((0|a[2])-i)|0)<d&&(d=f,g=o),(c=f-((0|A[o])>>n-s))<w&&(w=c,b=o),y=C[o]>>l,C[o]-=y,A[o]+=y<<h;return C[g]+=u,A[g]-=p,b}var M,F,A,C,I;this.buildColormap=function(){(function(){var t,e;for(M=[],F=new Int32Array(256),A=new Int32Array(r),C=new Int32Array(r),I=new Int32Array(r>>3),t=0;t<r;t++)e=(t<<s+8)/r,M[t]=new Float64Array([e,e,e,0]),C[t]=a/r,A[t]=0})(),function(){var r,o,n=t.length,a=30+(e-1)/3,h=n/(3*e),l=~~(h/i),u=d,p=c,g=p>>f;for(g<=1&&(g=0),r=0;r<g;r++)I[r]=u*((g*g-r*r)*w/(g*g));n<m?(e=1,o=3):o=n%b!=0?3*b:n%x!=0?3*x:n%v!=0?3*v:3*P;var M,F,A,C,D=0;for(r=0;r<h;)if(B(u,C=T(M=(255&t[D])<<s,F=(255&t[D+1])<<s,A=(255&t[D+2])<<s),M,F,A),0!==g&&S(g,C,M,F,A),(D+=o)>=n&&(D-=n),0===l&&(l=1),++r%l==0)for(u-=u/a,(g=(p-=p/y)>>f)<=1&&(g=0),C=0;C<g;C++)I[C]=u*((g*g-C*C)*w/(g*g))}(),function(){for(var t=0;t<r;t++)M[t][0]>>=s,M[t][1]>>=s,M[t][2]>>=s,M[t][3]=t}(),function(){var t,e,i,s,n,a,h=0,l=0;for(t=0;t<r;t++){for(n=t,a=(i=M[t])[1],e=t+1;e<r;e++)(s=M[e])[1]<a&&(n=e,a=s[1]);if(s=M[n],t!=n&&(e=s[0],s[0]=i[0],i[0]=e,e=s[1],s[1]=i[1],i[1]=e,e=s[2],s[2]=i[2],i[2]=e,e=s[3],s[3]=i[3],i[3]=e),a!=h){for(F[h]=l+t>>1,e=h+1;e<a;e++)F[e]=t;h=a,l=t}}for(F[h]=l+o>>1,e=h+1;e<256;e++)F[e]=o}()},this.getColormap=function(){for(var t=[],e=[],i=0;i<r;i++)e[M[i][3]]=i;for(var o=0,s=0;s<r;s++){var n=e[s];t[o++]=M[n][0],t[o++]=M[n][1],t[o++]=M[n][2]}return t},this.lookupRGB=function(t,e,i){t|=0,i|=0;for(var o,s,n,a=1e3,h=-1,l=0|F[e|=0],u=l-1;l<r||u>=0;)l<r&&((n=(0|(s=M[l])[1])-e)>=a?l=r:(l++,n<0&&(n=-n),(o=(0|s[0])-t)<0&&(o=-o),(n+=o)<a&&((o=(0|s[2])-i)<0&&(o=-o),(n+=o)<a&&(a=n,h=0|s[3])))),u>=0&&((n=e-(0|(s=M[u])[1]))>=a?u=-1:(u--,n<0&&(n=-n),(o=(0|s[0])-t)<0&&(o=-o),(n+=o)<a&&((o=(0|s[2])-i)<0&&(o=-o),(n+=o)<a&&(a=n,h=0|s[3]))));return h}}},function(t,e){var i=-1,r=12,o=5003,s=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];t.exports=function(t,e,n,a){function h(t,e){m[w++]=t,w>=254&&p(e)}function l(t){u(o),M=x+2,F=!0,y(x,t)}function u(t){for(var e=0;e<t;++e)B[e]=-1}function p(t){w>0&&(t.writeByte(w),t.writeBytes(m,0,w),w=0)}function f(t){return(1<<t)-1}function c(){return 0===remaining?i:(--remaining,255&n[curPixel++])}function y(t,e){for(d&=s[T],T>0?d|=t<<T:d=t,T+=n_bits;T>=8;)h(255&d,e),d>>=8,T-=8;if((M>g||F)&&(F?(g=f(n_bits=b),F=!1):(++n_bits,g=n_bits==r?1<<r:f(n_bits))),t==v){for(;T>0;)h(255&d,e),d>>=8,T-=8;p(e)}}var d,w,g,b,x,v,P=Math.max(2,a),m=new Uint8Array(256),B=new Int32Array(o),S=new Int32Array(o),T=0,M=0,F=!1;this.encode=function(s){s.writeByte(P),remaining=t*e,curPixel=0,function(t,e){var s,n,a,h,p,d,P;for(b=t,F=!1,n_bits=b,g=f(n_bits),v=1+(x=1<<t-1),M=x+2,w=0,h=c(),P=0,s=o;s<65536;s*=2)++P;P=8-P,u(d=o),y(x,e);t:for(;(n=c())!=i;)if(s=(n<<r)+h,a=n<<P^h,B[a]!==s){if(B[a]>=0){p=d-a,0===a&&(p=1);do{if((a-=p)<0&&(a+=d),B[a]===s){h=S[a];continue t}}while(B[a]>=0)}y(h,e),h=n,M<1<<r?(S[a]=M++,B[a]=s):l(e)}else h=S[a];y(h,e),y(v,e)}(P+1,s),s.writeByte(0)}}}])}]);
//# sourceMappingURL=gif.worker.js.map